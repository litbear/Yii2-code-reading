#控制器层对渲染方法的封装

在控制器类内调用`$this->render()`和`$this->renderPartial()`方法时,实际上使用了基类`yii\base\Controller`中的方法。基类控制器的方法摘要如下：

```php
<?php 

namespace yii\base;

use Yii;

class Controller extends Component implements ViewContextInterface
{
    public function render($view, $params = [])
    {
        /**
         *  先调用View类的方法渲染相应的视图
         * （不带布局文件）以字符串形式返回
         */
        $content = $this->getView()->render($view, $params, $this);
        // 再渲染内容，并返回结果
        return $this->renderContent($content);
    }


    public function renderContent($content)
    {
        $layoutFile = $this->findLayoutFile($this->getView());
        if ($layoutFile !== false) {
            // 再次调用renderFile()方法，渲染布局文件，并分配刚刚返回的字符串为$content变量
            return $this->getView()->renderFile($layoutFile, ['content' => $content], $this);
        } else {
            return $content;
        }
    }


    public function renderPartial($view, $params = [])
    {
        return $this->getView()->render($view, $params, $this);
    }
}
?>
```

由此可见，`yii\base\Controller::renderPartial()`方法调用的是`View`视图层的`render()`方法，而`yii\base\Controller::render()`方法首先调用`View`视图层的`render()`方法渲染视图文件，然后找到当前控制器应用的布局文件类(怎么找的，暂时不做赘述)，进而调用`View`视图层的`renderFile()`方法将视图文件和布局文件统一渲染。注意：事实上，`View`视图层的`render()`方法也内部调用了`View`视图层的`renderFile()`方法。因此，目前来看，`View`视图层开放给`Controller`控制器层两个渲染相关的方法`render()`方法和`renderFile()`方法。